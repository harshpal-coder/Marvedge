{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/harsh/OneDrive/Desktop/m/frontend/src/components/auth/LogoutButton.tsx"],"sourcesContent":["\"use client\";\r\nimport { useUser } from \"@/app/auth/userContext\";\r\nimport { useRouter } from \"next/navigation\";\r\n\r\nexport default function LogoutButton() {\r\n  const { logout, user } = useUser();\r\n  const router = useRouter();\r\n\r\n  if (!user) return null;\r\n\r\n  return (\r\n    <button\r\n      onClick={() => {\r\n        logout();\r\n        router.push(\"/\");\r\n      }}\r\n      className=\"px-4 py-2 rounded bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 hover:bg-gray-300 dark:hover:bg-gray-600 font-medium\"\r\n    >\r\n      Logout\r\n    </button>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AAFA;;;;AAIe,SAAS;IACtB,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,GAAG,IAAA,6IAAO;IAChC,MAAM,SAAS,IAAA,+IAAS;IAExB,IAAI,CAAC,MAAM,OAAO;IAElB,qBACE,8OAAC;QACC,SAAS;YACP;YACA,OAAO,IAAI,CAAC;QACd;QACA,WAAU;kBACX;;;;;;AAIL","debugId":null}},
    {"offset": {"line": 54, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/harsh/OneDrive/Desktop/m/frontend/src/app/dashboard/ProtectedRoute.tsx"],"sourcesContent":["\"use client\";\r\nimport { useUser } from \"@/app/auth/userContext\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { useEffect } from \"react\";\r\n\r\nexport default function ProtectedRoute({ children }: { children: React.ReactNode }) {\r\n  const { user } = useUser();\r\n  const router = useRouter();\r\n\r\n  useEffect(() => {\r\n    if (!user) router.push(\"/auth/login\");\r\n  }, [user, router]);\r\n\r\n  if (!user) return null;\r\n  return <>{children}</>;\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AAHA;;;;;AAKe,SAAS,eAAe,EAAE,QAAQ,EAAiC;IAChF,MAAM,EAAE,IAAI,EAAE,GAAG,IAAA,6IAAO;IACxB,MAAM,SAAS,IAAA,+IAAS;IAExB,IAAA,kNAAS,EAAC;QACR,IAAI,CAAC,MAAM,OAAO,IAAI,CAAC;IACzB,GAAG;QAAC;QAAM;KAAO;IAEjB,IAAI,CAAC,MAAM,OAAO;IAClB,qBAAO;kBAAG;;AACZ","debugId":null}},
    {"offset": {"line": 85, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/harsh/OneDrive/Desktop/m/frontend/src/app/dashboard/page.tsx"],"sourcesContent":["\r\n\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport Link from \"next/link\";\r\nimport LogoutButton from \"@/components/auth/LogoutButton\";\r\nimport { useUser } from \"@/app/auth/userContext\";\r\nimport ProtectedRoute from \"./ProtectedRoute\";\r\n\r\ninterface Tour {\r\n  id: string;\r\n  title: string;\r\n  steps: number | { id: string; description: string }[];\r\n  visibility: \"public\" | \"private\";\r\n  createdAt: string;\r\n  views: number;\r\n}\r\n\r\n\r\n\r\n\r\nexport default function DashboardPage() {\r\n  const [tours, setTours] = useState<Tour[]>([]);\r\n  const { user, token } = useUser();\r\n\r\n\r\n  useEffect(() => {\r\n    // Use deployed backend in production, localhost in development\r\n    const backendUrl = typeof window !== 'undefined' && window.location.hostname === 'localhost'\r\n      ? 'http://localhost:4000/api/tours'\r\n      : 'https://marvedge-backend.onrender.com/api/tours';\r\n    fetch(backendUrl, {\r\n      headers: {\r\n        ...(token ? { Authorization: `Bearer ${token}` } : {}),\r\n      },\r\n    })\r\n      .then(res => res.json())\r\n      .then(data => {\r\n        if (Array.isArray(data)) {\r\n          setTours(data.map((tour) => ({\r\n            ...tour,\r\n            id: tour.id || tour._id || tour._doc?._id || Math.random().toString(36),\r\n          })));\r\n        } else {\r\n          setTours([]);\r\n        }\r\n      })\r\n      .catch(() => setTours([]));\r\n  }, [token]);\r\n\r\n  return (\r\n    <ProtectedRoute>\r\n      <div className=\"min-h-screen bg-gradient-to-br from-blue-50 to-purple-100 dark:from-[#0a0a0a] dark:to-[#171717] p-8\">\r\n        <div className=\"flex justify-between items-center mb-8\">\r\n          <h1 className=\"text-3xl font-bold text-foreground\">Your Product Tours</h1>\r\n          <div className=\"flex items-center gap-4\">\r\n            {user && <span className=\"text-gray-700 dark:text-gray-200 font-medium\">{user.email}</span>}\r\n            <LogoutButton />\r\n          </div>\r\n        </div>\r\n        <div className=\"grid gap-6 grid-cols-1 sm:grid-cols-2 md:grid-cols-3\">\r\n          {tours.map((tour) => (\r\n            <div key={tour.id} className=\"bg-white dark:bg-[#18181b] rounded-xl shadow-md p-6 border border-gray-100 dark:border-gray-800 flex flex-col gap-2\">\r\n              <div className=\"flex justify-between items-center mb-2\">\r\n                <h2 className=\"font-semibold text-lg text-foreground\">{tour.title}</h2>\r\n                <span className={`px-2 py-1 rounded text-xs font-medium ${tour.visibility === \"public\" ? \"bg-blue-100 text-blue-700\" : \"bg-gray-200 text-gray-700\"}`}>\r\n                  {tour.visibility}\r\n                </span>\r\n              </div>\r\n              <div className=\"text-gray-500 text-sm mb-1\">\r\n                {Array.isArray(tour.steps) ? tour.steps.length : tour.steps} steps\r\n              </div>\r\n              <div className=\"text-gray-400 text-xs mb-2\">Created: {tour.createdAt}</div>\r\n              <div className=\"flex items-center gap-2 text-xs text-gray-500\">\r\n                <svg width=\"16\" height=\"16\" fill=\"none\" viewBox=\"0 0 24 24\"><path d=\"M12 5c-7 0-9 7-9 7s2 7 9 7 9-7 9-7-2-7-9-7zm0 10a3 3 0 1 1 0-6 3 3 0 0 1 0 6z\" stroke=\"#6366F1\" strokeWidth=\"1.5\"/></svg>\r\n                {tour.views} views\r\n              </div>\r\n              <div className=\"flex gap-2 mt-4\">\r\n                <Link href={`/dashboard/tour/${tour.id}`} className=\"inline-block px-4 py-2 rounded bg-blue-600 text-white text-sm font-semibold hover:bg-blue-700 transition\">View/Edit</Link>\r\n                <button\r\n                  onClick={async () => {\r\n                    if (!window.confirm('Are you sure you want to delete this tour?')) return;\r\n                    try {\r\n                      const res = await fetch(`http://localhost:4000/api/tours/${tour.id}`, {\r\n                        method: 'DELETE',\r\n                        headers: {\r\n                          ...(token ? { Authorization: `Bearer ${token}` } : {}),\r\n                        },\r\n                      });\r\n                      if (res.ok) {\r\n                        setTours(tours.filter(t => t.id !== tour.id));\r\n                      } else {\r\n                        const data = await res.json();\r\n                        alert(data.error || 'Failed to delete tour');\r\n                      }\r\n                    } catch (err) {\r\n                        alert('Network error');\r\n                    }\r\n                  }}\r\n                  className=\"inline-block px-4 py-2 rounded bg-red-600 text-white text-sm font-semibold hover:bg-red-700 transition\"\r\n                >\r\n                  Delete\r\n                </button>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n        <div className=\"mt-10 text-center\">\r\n          <Link href=\"/dashboard/tour/new\" className=\"inline-block px-6 py-3 rounded-full bg-purple-600 text-white font-semibold shadow-lg hover:bg-purple-700 transition\">+ Create New Tour</Link>\r\n        </div>\r\n      </div>\r\n    </ProtectedRoute>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}